"use strict";(()=>{var e={};e.id=1491,e.ids=[1491],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2906:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>v});var r={};o.r(r),o.d(r,{GET:()=>d,POST:()=>p});var n=o(9303),s=o(8716),i=o(670),a=o(7070);async function d(e,{params:t}){try{let e=t.videoId;if(!e)return a.NextResponse.json({error:"videoId가 필요합니다."},{status:400});if(!await u(e))return a.NextResponse.json({error:"비디오를 찾을 수 없습니다."},{status:404});let o=function(e){let t=`
# 샘플 비디오 파일
# Video ID: ${e}
# 생성 시간: ${new Date().toISOString()}
#
# 실제 구현에서는 여기서 FFmpeg로 생성된 MP4 파일의 바이너리 데이터를 반환합니다.
#
# 데모 목적으로 간단한 텍스트 기반 샘플을 생성합니다.
`,o=Buffer.from([0,0,0,32,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,97,118,99,49]);return Buffer.concat([o,Buffer.from(t,"utf8"),Buffer.alloc(102400)])}(e),r=new Headers;return r.set("Content-Type","video/mp4"),r.set("Content-Disposition",`attachment; filename="${e}.mp4"`),r.set("Content-Length",o.length.toString()),new Response(o,{status:200,headers:r})}catch(e){return console.error("비디오 다운로드 오류:",e),a.NextResponse.json({error:"비디오 다운로드 중 오류가 발생했습니다."},{status:500})}}async function u(e){return{id:e,status:"completed",created_at:new Date().toISOString(),file_size:5242880}}async function p(e,{params:t}){try{let e=t.videoId,o=`/api/video/download/${e}`,r=new Date(Date.now()+864e5);return a.NextResponse.json({success:!0,downloadLink:o,expiresAt:r,message:"다운로드 링크가 생성되었습니다."})}catch(e){return console.error("다운로드 링크 생성 오류:",e),a.NextResponse.json({error:"다운로드 링크 생성 중 오류가 발생했습니다."},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/video/download/[videoId]/route",pathname:"/api/video/download/[videoId]",filename:"route",bundlePath:"app/api/video/download/[videoId]/route"},resolvedPagePath:"C:\\projects\\survivingvid\\src\\app\\api\\video\\download\\[videoId]\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:v,serverHooks:f}=c,m="/api/video/download/[videoId]/route";function g(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:v})}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[9276,5972],()=>o(2906));module.exports=r})();