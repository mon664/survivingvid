"use strict";(()=>{var e={};e.id=2215,e.ids=[2215],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},711:(e,t,o)=>{o.r(t),o.d(t,{originalPathname:()=>f,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>l,serverHooks:()=>v,staticGenerationAsyncStorage:()=>g});var r={};o.r(r),o.d(r,{GET:()=>p,POST:()=>u});var n=o(9303),s=o(8716),a=o(670),i=o(7070);async function u(e){try{let{subject:t,style:o,duration:r,voiceType:n,aspectRatio:s,quality:a}=await e.json();if(!t)return i.NextResponse.json({error:"주제를 입력해주세요."},{status:400});let u=`video_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,c={success:!0,videoId:u,message:"영상 생성을 시작했습니다.",estimatedTime:2*Math.ceil(r/30),downloadUrl:`/api/video/download/${u}`,status:"processing",data:{storyboard:{title:`${t} - 자동 생성 영상`,description:`${o} 스타일의 ${r}초 영상`,scenes:[{scene:1,description:"오프닝 인트로",duration:3},{scene:2,description:`${t} 소개`,duration:10},{scene:3,description:"주요 내용 전개",duration:r-13},{scene:4,description:"엔딩 아웃트로",duration:3}]}}};return setTimeout(async()=>{await d(u,t,o,r)},1e3),i.NextResponse.json(c)}catch(e){return console.error("영상 생성 오류:",e),i.NextResponse.json({error:"영상 생성 중 오류가 발생했습니다."},{status:500})}}async function d(e,t,o,r){for(let t of(console.log(`영상 생성 시작: ${e}`),[{name:"스크립트 생성",duration:2e3},{name:"이미지 생성",duration:3e3},{name:"음성 합성",duration:2500},{name:"비디오 렌더링",duration:4e3},{name:"최종 편집",duration:1500}]))console.log(`진행 중: ${t.name}`),await new Promise(e=>setTimeout(e,t.duration));console.log(`영상 생성 완료: ${e}`);let n=function(e,t,o){let r={id:Date.now(),subject:e,style:t,duration:o,created_at:new Date().toISOString(),metadata:{format:"mp4",resolution:"1920x1080",fps:30,codec:"h264"}};return Buffer.from(JSON.stringify(r))}(t,o,r);await c(e,n)}async function c(e,t){console.log(`비디오 저장 완료: ${e}, 크기: ${t.length} bytes`)}async function p(e){let{searchParams:t}=new URL(e.url),o=t.get("videoId");return o?i.NextResponse.json({videoId:o,status:"completed",progress:100,message:"영상 생성이 완료되었습니다."}):i.NextResponse.json({error:"videoId가 필요합니다."},{status:400})}let l=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/video/generate/route",pathname:"/api/video/generate",filename:"route",bundlePath:"app/api/video/generate/route"},resolvedPagePath:"C:\\projects\\survivingvid\\src\\app\\api\\video\\generate\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:g,serverHooks:v}=l,f="/api/video/generate/route";function x(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:g})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[9276,5972],()=>o(711));module.exports=r})();