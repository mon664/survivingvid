"use strict";(()=>{var t={};t.id=4802,t.ids=[4802],t.modules={399:t=>{t.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9094:(t,e,r)=>{r.r(e),r.d(e,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>C,staticGenerationAsyncStorage:()=>l});var i={};r.r(i),r.d(i,{GET:()=>d});var a=r(9303),s=r(8716),o=r(670),n=r(7070),c=r(8311);async function d(t){try{let{searchParams:e}=new URL(t.url),r=e.get("userId"),i=parseInt(e.get("limit")||"50");if(!r)return n.NextResponse.json({error:"사용자 ID가 필요합니다."},{status:400});let a=await c.x.getTransactionHistory(r,i);return n.NextResponse.json({success:!0,data:{transactions:a,total:a.length}})}catch(t){return console.error("크레딧 내역 조회 API 오류:",t),n.NextResponse.json({error:"크레딧 내역 조회에 실패했습니다.",details:t instanceof Error?t.message:"알 수 없는 오류"},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/credits/history/route",pathname:"/api/credits/history",filename:"route",bundlePath:"app/api/credits/history/route"},resolvedPagePath:"C:\\projects\\survivingvid\\src\\app\\api\\credits\\history\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:C}=u,g="/api/credits/history/route";function h(){return(0,o.patchFetch)({serverHooks:C,staticGenerationAsyncStorage:l})}},8311:(t,e,r)=>{r.d(e,{x:()=>i});class i{static{this.COSTS={generate_script:{action:"AI 스크립트 생성",cost:{"S-CRD":1,"E-CRD":0},description:"AI 기반 영상 스크립트 생성"},generate_images:{action:"AI 이미지 생성",cost:{"S-CRD":1,"E-CRD":0},description:"이미지 1개 생성당"},render_video:{action:"영상 렌더링",cost:{"S-CRD":2,"E-CRD":0},description:"영상 1개 렌더링"},download_youtube:{action:"YouTube 다운로드",cost:{"S-CRD":1,"E-CRD":0},description:"YouTube 영상 다운로드"},export_high_quality:{action:"고품질 내보내기",cost:{"S-CRD":0,"E-CRD":1},description:"고화질/고프레임 렌더링"}}}static{this.DEMO_CREDITS={"S-CRD":100,"E-CRD":50,total:150,lastUpdated:new Date}}static async getCreditBalance(t){return{...this.DEMO_CREDITS}}static async canAfford(t,e,r=1){try{let i=await this.getCreditBalance(t),a=this.COSTS[e];if(!a)throw Error(`알 수 없는 액션: ${e}`);let s=a.cost["S-CRD"]*r,o=a.cost["E-CRD"]*r;return i["S-CRD"]>=s&&i["E-CRD"]>=o}catch(t){return console.error("크레딧 확인 오류:",t),!1}}static async spendCredits(t,e,r=1,i){let a=this.COSTS[e];if(!a)throw Error(`알 수 없는 액션: ${e}`);let s=a.cost["S-CRD"]*r,o=a.cost["E-CRD"]*r;if(!await this.canAfford(t,e,r))throw Error("크레딧이 부족합니다.");let n=await this.getCreditBalance(t);return{id:`demo_${Date.now()}`,userId:t,type:"spend",amount:s+o,creditType:o>0?"E-CRD":"S-CRD",description:`${a.description} (${r}개)`,category:this.getCategoryFromAction(e),metadata:{...i,action:e,quantity:r,cost_breakdown:a.cost},balance:{"S-CRD":n["S-CRD"],"E-CRD":n["E-CRD"]},createdAt:new Date}}static async addCredits(t,e,r,i,a){let s=await this.getCreditBalance(t);return{id:`demo_${Date.now()}`,userId:t,type:"earn",amount:e,creditType:r,description:i,category:a?.category||"bonus",metadata:a,balance:s,createdAt:new Date}}static async getTransactionHistory(t,e=50){return[]}static getCategoryFromAction(t){return({generate_script:"script",generate_images:"image",render_video:"video",download_youtube:"video",export_high_quality:"video"})[t]||"other"}static getAvailableActions(){return{...this.COSTS}}static async giveDailyLoginBonus(t){return!1}}}};var e=require("../../../../webpack-runtime.js");e.C(t);var r=t=>e(e.s=t),i=e.X(0,[9276,5972],()=>r(9094));module.exports=i})();