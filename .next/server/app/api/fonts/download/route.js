"use strict";(()=>{var e={};e.id=3941,e.ids=[3941],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1282:e=>{e.exports=require("child_process")},629:e=>{e.exports=require("fs/promises")},5315:e=>{e.exports=require("path")},1764:e=>{e.exports=require("util")},7814:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>j,patchFetch:()=>P,requestAsyncStorage:()=>h,routeModule:()=>x,serverHooks:()=>y,staticGenerationAsyncStorage:()=>v});var o={};t.r(o),t.d(o,{GET:()=>w,POST:()=>g});var n=t(9303),s=t(8716),i=t(670),a=t(7070),u=t(1282),l=t(1764),d=t(5315),p=t.n(d),f=t(629),c=t.n(f),m=t(7677);async function g(e){try{let r=await e.json();if(!r.family||!r.url)return a.NextResponse.json({error:"폰트 정보가 필요합니다."},{status:400});let{family:t,variant:o,url:n}=r,s=p().join(process.cwd(),"public","fonts");await c().mkdir(s,{recursive:!0});let i=(0,m.Z)(),u=n.includes(".woff2")?".woff2":n.includes(".woff")?".woff":(n.includes(".ttf"),".ttf"),l=`${t.replace(/\s+/g,"_")}_${o}${u}`,d=p().join(s,l),f=await fetch(n);if(!f.ok)throw Error("폰트 다운로드 실패");let g=Buffer.from(await f.arrayBuffer());await c().writeFile(d,g);let w=await c().stat(d);return a.NextResponse.json({success:!0,data:{downloadId:i,fileName:l,filePath:`/fonts/${l}`,fileSize:w.size,family:t,variant:o}})}catch(e){return console.error("폰트 다운로드 API 오류:",e),a.NextResponse.json({error:"폰트 다운로드에 실패했습니다.",details:e instanceof Error?e.message:"알 수 없는 오류"},{status:500})}}async function w(){return a.NextResponse.json({message:"SurvivingVid Google Fonts 다운로드 API",endpoints:{POST:"/api/fonts/download",description:"Google Fonts 다운로드"},usage:{family:"string (필수) - 폰트 패밀리 이름",variant:"string - 폰트 변형 (기본값: regular)",url:"string (필수) - 폰트 파일 URL"}})}(0,l.promisify)(u.exec);let x=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/fonts/download/route",pathname:"/api/fonts/download",filename:"route",bundlePath:"app/api/fonts/download/route"},resolvedPagePath:"C:\\projects\\survivingvid\\src\\app\\api\\fonts\\download\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:h,staticGenerationAsyncStorage:v,serverHooks:y}=x,j="/api/fonts/download/route";function P(){return(0,i.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:v})}},7677:(e,r,t)=>{t.d(r,{Z:()=>l});let o=require("crypto");var n=t.n(o);let s={randomUUID:n().randomUUID},i=new Uint8Array(256),a=i.length,u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));let l=function(e,r,t){if(s.randomUUID&&!r&&!e)return s.randomUUID();let o=(e=e||{}).random||(e.rng||function(){return a>i.length-16&&(n().randomFillSync(i),a=0),i.slice(a,a+=16)})();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,r){t=t||0;for(let e=0;e<16;++e)r[t+e]=o[e];return r}return function(e,r=0){return u[e[r+0]]+u[e[r+1]]+u[e[r+2]]+u[e[r+3]]+"-"+u[e[r+4]]+u[e[r+5]]+"-"+u[e[r+6]]+u[e[r+7]]+"-"+u[e[r+8]]+u[e[r+9]]+"-"+u[e[r+10]]+u[e[r+11]]+u[e[r+12]]+u[e[r+13]]+u[e[r+14]]+u[e[r+15]]}(o)}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[9276,5972],()=>t(7814));module.exports=o})();